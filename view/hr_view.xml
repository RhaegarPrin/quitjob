<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <record id="refuse_note" model="ir.ui.view">
        <field name="name">Hr note new form</field>
        <field name="model">employee.req</field>
        <field name="arch" type="xml">
            <form>
                <group invisible="1">
                    <field name="status"/>
                </group>
                <group string="Reason test">
                    <group string="Note">
                        <field name="hr_interview" string="HR Note" attrs="{'invisible':[('status','!=','hr')]}"/>
                        <field name="dl_interview" string="DL Note" attrs="{'invisible':[('status','!=','dl2')]}"/>
                        <field name="pm_interview" string="PM Note" attrs="{'invisible':[('status','!=','pm')]}"/>
                    </group>
                </group>

                <button name="pm_refuse_done" type="object" attrs="{'invisible':[('status','!=','pm')]}">PM Refuse
                </button>
                <button name="dl_refuse_done" type="object" attrs="{'invisible':[('status','!=','dl2')]}">DL Refuse
                </button>
                <button name="hr_refuse_done" type="object" attrs="{'invisible':[('status','!=','hr')]}">HR Refuse
                </button>
            </form>
        </field>
    </record>

    <!--    form pop up khi approved-->
    <record id="approved_note" model="ir.ui.view">
        <field name="name">Approved Note</field>
        <field name="model">employee.req</field>
        <field name="active">false</field>
        <field name="arch" type="xml">
            <form edit="0" create="0" delete="0">
                <group string="PICK">
                    <!--                    <group attrs="{'invisible':[('status','!=','dl2'),('pm_accept','!=',True)]}" name="PM">-->
                    <!--                        <field name="pm_id" string="PM"-->
                    <!--                               attrs="{'invisible':[('status','!=','dl2'),('pm_accept','!=',True)]}"/>-->
                    <!--                    </group>-->
                    <group attrs="{'invisible':[('status','in',['dl2','hr'])]}">
                        <field name="department_id" invisible="1"/>
                        <field name="dl_id" string="DL"
                               attrs="{'invisible':[('status','in',['dl2','hr'])]}"
                               domain="[('department_id', '=', department_id),('job_title','=','DL')]"/>
                    </group>
                    <group attrs="{'invisible':[('status','!=','dl2')]}" name="HR">
                        <field name="hr_id" string="HR" attrs="{'invisible':[('status','!=','dl2')]} "
                               domain="[('department_id', '=', department_id),('job_title','=','Hr')]"/>
                    </group>
                </group>
                <group string="Note">
                    <field name="hr_interview" string="HR Note" attrs="{'invisible':[('status','!=','hr')]}"/>
                    <field name="dl_interview" string="DL Note" attrs="{'invisible':[('status','!=','dl2')]}"/>
                    <field name="pm_interview" string="PM Note" attrs="{'invisible':[('status','!=','pm')]}"/>
                </group>
                <!-- get field to attrs-->
                <group invisible="1">
                    <field name="status" string="Status"/>
                    <field name="hr_accept" string="HR Aprroved"/>
                    <field name="dl_second_accept" string="DL Aprroved"/>
                    <field name="pm_accept" string="DL Aprroved"/>
                </group>
                <!--                get field for attrs-->

                <button name="send_req_done" type="object"
                        attrs="{'invisible':[('status','!=','draft')]}">Send reqest
                </button>
                <button name="PM_approud_done" type="object" attrs="{'invisible':[('status','!=','pm')]}">PM
                    Approve
                </button>
                <button name="Dl_approved_done" type="object" attrs="{'invisible':[('status','!=','dl2')]}">DL
                    Approve
                </button>
                <button name="Hr_approved_done" type="object" attrs="{'invisible':[('status','!=','hr')]}">HR
                    Approve
                </button>
            </form>
        </field>
    </record>
    <!--form pop up khi approved-->

    <!--    form dl msg for pm-->
    <record id="dl_2_pm" model="ir.ui.view">
        <field name="name">DL msf for PM</field>
        <field name="model">employee.req</field>
        <field name="active">false</field>
        <field name="arch" type="xml">
            <form>
                <group string="Pick">
                    <field name="department_id" invisible="1"/>
                    <field name="pm_id" string="PM "
                           domain="[('department_id', '=', department_id),('job_title','=','PM')]"/>
                    <field name="dl_msg_pm" string="MSG"/>
                    <button name="DL_2_PM_done" type="object">Send to PM</button>
                </group>
            </form>
        </field>
    </record>


    <record id="quitjob_manage.employee_hr_note" model="ir.actions.act_window">
        <field name="name">Hr note</field>
        <field name="res_model">hr_note_trans</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{'force_detailed_view': 'true',
            'res_id':self.id,
            'form_view_initial_mode': 'edit'}
        </field>
        <field name="view_id" ref="quitjob_manage.hr_note_trans_form"/>
    </record>
</odoo>